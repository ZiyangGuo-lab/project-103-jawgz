{% extends "hoosRiding/base.html" %}
{% load static %}

{% block content %}

<!-- Style Sheet Import -->
<link rel="stylesheet" type="text/css" href="{% static 'user_profile/user_profile.css' %}">

<h1>Welcome, {{ user.first_name }}! </h1>

<div class="profile">
<!--    Left Side       -->
    <div class="left">
        <img class="avatar" src="https://www.w3schools.com/howto/img_avatar2.png">
        <br/><br/>
        <div class="star-rank">
<!--            use for loop to loop thru stars this person has -->
            <img class="star" src="https://yakimaymca.org/wp-content/uploads/2018/11/Star.png">
            <img class="star" src="https://yakimaymca.org/wp-content/uploads/2018/11/Star.png">
            <img class="star" src="https://yakimaymca.org/wp-content/uploads/2018/11/Star.png">
            <img class="star" src="https://yakimaymca.org/wp-content/uploads/2018/11/Star.png">
            <img class="star" src="https://yakimaymca.org/wp-content/uploads/2018/11/Star.png">

<!--            <img class="star" src="https://p7.hiclipart.com/preview/191/610/574/five-pointed-star-outline-symbol-clip-art-star.jpg">-->
        </div>
        <br/>
<!--        Display Profile -->
        <div>
            <b>Name: </b>
            {{ user.first_name }} {{ user.last_name }}
            <br/>
            <b>Email: </b>
            {{ user.email }}
            <br/>
            <b>Cell: </b>
            {% if current_user.cellphone %}
                {{ current_user.cellphone }}
            {% else %}
                No phone number provided
            {% endif %}
            <br/>
            <b>Car:</b>
            {% if current_user.car_type %}
                {{ current_user.car_type }}
            {% else %}
                No car type provided
            {% endif %}
            <br/>
            <b>License Plate: </b>
            {% if current_user.license_plate  %}
                {{ current_user.license_plate }}
            {% else %}
                No license plate provided
            {% endif %}
            <br/>
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#editProfileModal">Edit Profile</button>

            <!-- Edit Profile Modal -->
            <div class="modal fade" id="editProfileModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="modal-title" id="exampleModalLongTitle">Edit Profile Information</h3>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form action="" method="get">
                                {% csrf_token %}
                                <label for="cell"><b>Cell Number: </b></label>
                                <input id="cell" type="text" name="cellphone" placeholder="{{ current_user.cellphone }}" value="{{ current_user.cellphone  }}">
                                <br/>
                                <label for="car_type"><b>Car Type: </b></label>
                                <input id="car_type" type="text" name="car_type" placeholder="{{ current_user.car_type }}" value="{{  current_user.car_type }}">
                                <br/>
                                <label for="license_plate"><b>License Plate:</b></label>
                                <input id="license_plate" type="text" name="license_plate" placeholder="{{ current_user.license_plate }}" value="{{ current_user.license_plate }}">
                                <br/>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                    <input type="submit" value="Save" class="btn btn-primary">
                                 </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<!--    Right Side      -->
    <div class="right">
        <div>
            <h3>Open Rides</h3>
            {% if open_rides %}
                <ul>
                {% for Posting in open_rides %}
                      <div class="card text-black mb-4" style="width: 25rem; background: light; border: px solid #FF860E; outline-color: 6px solid #CCC873">
                          <div class="card-footer">
                              <h5 class="card-title">{{ Posting.date }}</h5>
                        </div>
                        <div class="card-body">
                            <p class="card-title">From: {{ Posting.location_from }}</p>
                            <p class="card-title">To: {{ Posting.location_to }}</p>
                            <p class="card-text">Driver Name: {{ Posting.driver_name }}</p>
                            <p class="card-text">Dates: {{ Posting.riding_date}}</p>
                            <p class="card-price">Price: {{ Posting.price }}</p>
                            <p class="card-id">User id: {{ Posting.driver_id }}</p>
                            <p class="card-id">Number of Passengers: {{ Posting.num_passengers }}</p>

                            <iframe
                              width="300"
                              height="300"
                              frameborder="0" style="border:0"
                              src="https://www.google.com/maps/embed/v1/directions?key=AIzaSyAcJ9C8vhZqeSsNbZ8hxGGeR8F7s351_8Y&origin={{Posting.location_from}}&destination={{Posting.location_to}}" allowfullscreen>
                            </iframe>
                        </div>
                          <div class="card-footer">
<!--                              <a href="{% url 'user-profile' %}?user={{Posting.driver_id}}" class="btn btn-dark" >Contact Driver</a>-->
                          </div>
                      </div>
                    {% endfor %}
                </ul>
            {% else %}
            <p>No open rides are available.</p>
            {% endif %}
        </div>
        <div>
            <h3>Past Rides</h3>
              {% if past_rides %}
                <ul>
                {% for Posting in past_rides %}
                      <div class="card text-black mb-4" style="width: 25rem; background: light; border: px solid #FF860E; outline-color: 6px solid #CCC873">
                          <div class="card-footer">
                              <h5 class="card-title">{{ Posting.date }}</h5>
                        </div>
                        <div class="card-body">
                            <p class="card-title">From: {{ Posting.location_from }}</p>
                            <p class="card-title">To: {{ Posting.location_to }}</p>
                            <p class="card-text">Driver Name: {{ Posting.driver_name }}</p>
                            <p class="card-text">Dates: {{ Posting.riding_date}}</p>
                            <p class="card-price">Price: {{ Posting.price }}</p>
                            <p class="card-id">User id: {{ Posting.driver_id }}</p>
                            <p class="card-id">Number of Passengers: {{ Posting.num_passengers }}</p>

                            <iframe
                              width="300"
                              height="300"
                              frameborder="0" style="border:0"
                              src="https://www.google.com/maps/embed/v1/directions?key=AIzaSyAcJ9C8vhZqeSsNbZ8hxGGeR8F7s351_8Y&origin={{Posting.location_from}}&destination={{Posting.location_to}}" allowfullscreen>
                            </iframe>
                        </div>
                          <div class="card-footer">
<!--                              <a href="{% url 'user-profile' %}?user={{Posting.driver_id}}" class="btn btn-dark" >Contact Driver</a>-->
                          </div>
                      </div>
                    {% endfor %}
                </ul>
            {% else %}
            <p>No open rides are available.</p>
            {% endif %}

        </div>
    </div>

</div>
{% endblock content %}
