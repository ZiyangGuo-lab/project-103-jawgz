{% extends "hoosRiding/base.html" %}
{% load static %}
{% load request_ride %}
{% block content %}
<script src="https://code.jquery.com/jquery-3.1.1.min.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
<script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>

<div class="container-fluid" style="padding:10%">
  <div class="row">

    <div class="col-4">

      <div class="row">
        <div id = "search">
          <form action="{% url 'search' %}" method="get", value="{{request.GET.q}}">
            <br> <input name="location_to" type="text" placeholder="location_to" value="{{request.GET.q}}" ></br>
            <br> <input name="location_from" type="text" placeholder="location_from" value="{{request.GET.q}}" ></br>
            <tr>
              <td style="padding:20px">Date of Ride</td>
              <td><input type="text" name="date_month" size="2">/<input type="text" name="date_day" size="2">/<input type="text" name="date_year" size="4"></td>
            </tr>
            <br><input type="submit" name="submit" value="Search"/></br>
          </form>
        </div>
      </div>

      <div class="row">
        <div id="myBtnContainer">
          <button class="btn active mb-3"  style="border-radius: 50%; border: #001a33"><a href="{% url 'sortByDate' %}">Date</a></button>
          <button class="btn mb-3"  style="border-radius: 50%; border: #001a33">Rating</button>
          <!-- <button class="btn mb-3" style="border-radius: 50%; border: #FF860E"></button> -->
          <button class="btn mb-3" style="border-radius: 50%; border: #001a33"><a href="{% url 'sortByPrice' %}">price</a></button>
        </div>
      </div>

    </div>

    <div class="col-8">
      {% if postings_list %}
        {% for Posting in postings_list %}
          <div class="ui fluid raised centered card">
              <div class="content">
                  <table style="width:100%;height:100%">
                      <td><h3>{{ Posting.location_from }} to {{ Posting.location_to }}<i class="car icon"></i></h3></td>
                      <td style="text-align: right;">
                        {{ Posting.riding_date}}
                      </td>
                  </table>
                <div class="meta">{{ Posting.riding_date}} </div>
                <div class="description">
                  <p>Asking price: ${{ Posting.price }}</p>
                    <p>Spots left: {{ Posting.num_passengers }}</p>
                </div>
              </div>
              <div class="ui styled accordion">
                    <div class="title">
                        <i class="dropdown icon"></i>
                        Details
                </div>
                    <div class="content">
                <p class="transition ">
                    Riders on trip
                    {% with Posting.riders_riding|split:"," as request_list %}
                        {% if request_list %}
                            <ul>
                            {% for rider in request_list %}
                                <li>{{rider}}</li>

                            {% endfor %}
                            </ul>
                        {% else %}
                        <p>None</p>
                        {% endif %}

                    {% endwith %}

                    <br>
                    <iframe
                          width="500"
                          height="300"
                          frameborder="0" style="border:0"
                          src="https://www.google.com/maps/embed/v1/directions?key=AIzaSyAcJ9C8vhZqeSsNbZ8hxGGeR8F7s351_8Y&origin={{Posting.location_from}}&destination={{Posting.location_to}}" allowfullscreen>
                        </iframe>
                </p>
                    </div>
                </div>

            </div>
        {% endfor %}
      {% else %}
      {% endif %}
    </div>

  </div>
  
</div>
{% endblock content %}